<%- layout('./layouts/boilerplate.ejs') %>

<div class="contact-us" id="contact-us">
  <h1>Contact Us</h1>
  <form class="contact-form">
    <div class="form-section flex-md-row flex-column justify-content-between">
      <div class="col-sm-12 col-md-6">
        <input
          class="contact-input"
          type="text"
          id="input-name"
          placeholder="Name"
          name="name"
          required
        />
        <input
          class="contact-input"
          type="email"
          id="input-email"
          placeholder="Email address"
          name="email"
          required
        />
        <input
          class="contact-input"
          type="text"
          id="input-subject"
          placeholder="Subject"
          name="subject"
          required
        />
      </div>
      <div class="col-sm-12 col-md-6">
        <textarea
          class="contact-input"
          name="message"
          type="text"
          id="input-message"
          placeholder="Message"
          required
        ></textarea>
      </div>
    </div>
    <input type="submit" value="Submit" id="input-submit" />
  </form>
</div>


<script>
    function validateForm() {
        var name = $("#input-name");
        var email = $("#input-email");
        var subject = $("#input-subject");
        var message = $("#input-message");
        var emailPattern =
            /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
    
        var validate = true;
        $(".contact-input").removeClass("contact-input-error");
    
        if (
            name.val().trim() === "" ||
            name.val().length < 2 ||
            name.val().length > 50
        ) {
            name.addClass("contact-input-error");
            validate = false;
        }
    
        if (!emailPattern.test(email.val())) {
            email.addClass("contact-input-error");
            validate = false;
        }
    
        if (
            subject.val().trim() === "" ||
            subject.val() === null ||
            subject.val().length < 2 ||
            subject.val().length > 50
        ) {
            subject.addClass("contact-input-error");
            validate = false;
        }
    
        if (
            message.val().trim() === "" ||
            message.val() === null ||
            message.val().length < 2 ||
            message.val().length > 50
        ) {
            message.addClass("contact-input-error");
            validate = false;
        }
    
        return validate;
    }
    
    function submitHandler(event) {
        event.preventDefault();
        if (validateForm()) {
            alert("Form submitted");
        }
    }
    $(document).ready(function () {
        $("#input-submit").on("click",submitHandler);
    });
</script>
